; ----- Simple program with a procedure call--------
CALL 20
SUB CL,30
PUSH CL
POP BL

CALL 20
SUB CL,30
PUSH CL
POP DL

CALL 40

CALL 70
HALT
; ----- and program will end here ----------------------------
ORG 20
PUSHF
PUSH AL
NUMBER:	
	IN 00	;GET INPUT FROM KEYBOARD
	CMP AL,3A ;CHECK NUMBER LESS THAN 3A
	JNS NUMBER ;IF NOT GET INPUT AGAIN
	CMP AL,30 ;CHECK NUMBER GREATER THAN 30
	JS NUMBER ;IF NOT GET INPUT AGAIN
	PUSH AL
	POP CL
	POPF
	POP AL
	RET

;------ GET OPERATOR ----------------------------------------
ORG 40
PUSHF
PUSH AL
OPERATOR:
	IN 00 ;GET INPUT FROM KEYBOARD
	CMP AL,2A ; *
	JZ STORE ; JUMP TO STORE OPERATOR IF ITS OPERATOR
	CMP AL,2B ; +
	JZ STORE 
	CMP AL,2D ; -
	JZ STORE
	CMP AL,2F ; /
	JZ STORE
	JNZ OPERATOR

STORE:
	PUSH AL
	POP CL
	POPF
	POP AL
	RET
;------- GET THE EQUALS ------------------------------------
ORG 70
PUSHF
PUSH AL
EQUALS:
	IN 00
	CMP AL,3D
	JZ CHECK
	JNZ EQUALS

CHECK:
	CMP AL,2A ; *
	JZ M
	CMP AL,2B ; +
	JZ PLUS 
	CMP AL,2D ; -
	JZ MINUS
	CMP AL,2F ; /
	JZ DIVIDE 


M:
	MUL BL,DL
	JMP END

PLUS:
	ADD BL,DL
	JMP END

MINUS:
	SUB BL,DL
	JMP END

DIVIDE:
	DIV BL,DL
	JMP END

END:
	MOV CL,C0
	MOV [CL],BL
	POPF
	POP AL


END
